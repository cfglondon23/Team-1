<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Learn!</title>
    <!-- Add Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <!-- Add Poppins font from Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <!-- Add custom CSS for dark theme -->
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #f8f9fa;
            color: #2c2f33;
        }

        h1,
        h2 {
            font-weight: 600;
        }

        #generated_text {
            font-weight: 400;
            white-space: pre-wrap;
        }

        .animated-btn {
            font-weight: 600;
            border: none;
            background-color: #7289da;
            color: #fff;
            padding: 0.5rem 1.5rem;
            border-radius: 0.25rem;
            cursor: pointer;
            animation: pulse 2s infinite;
        }

        .animated-btn:hover {
            animation: none;
            background-color: #5c7cda;
        }

        @keyframes pulse {
            0% {
                transform: scale(1);
                opacity: 1;
            }

            50% {
                transform: scale(1.05);
                opacity: 0.7;
            }

            100% {
                transform: scale(1);
                opacity: 1;
            }
        }
    </style>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        $(document).ready(function () {
            // Initialize variable to hold the prompt
            let eventPrompt = "I want you to act as an event manager. Your name is eventy, give intro before you respond. You will be tasked with organizing and coordinating events, such as conferences, meetings, and parties. This could include managing budgets, hiring vendors and staff, arranging accommodations and transportation, and handling logistics. In your response, you must generate the event description, location, and date seperately(if user does not input, then generate random one yourself)";
    
            // Add event listener to copy text button
            $("#copy_text").click(function () {
                // Create a new textarea element to hold the generated text
                let tempTextArea = $("<textarea>");
                $("body").append(tempTextArea);
                tempTextArea.val($("#generated_text").text()).select();
                document.execCommand("copy");
                tempTextArea.remove();
                // Show success message
                $("#copy_text").text("Copied!").addClass("btn-success").removeClass("btn-primary");
            });
    
            // Add event listener to dashboard button
            $("#dashboard").click(function () {
                window.location.href = "/provider/dashboard";
            });
    
            // Add event listener to generate text button
            $("#generate_text").click(function () {
                // Reset copy text button
                $("#copy_text").text("Copy Text").removeClass("btn-success").addClass("btn-primary");
                let userInput = $("#user_input").val();
                // Send the event prompt and user input to the server
                $.post("/generate", { prompt: eventPrompt, user_input: userInput }, function (data) {
                    $("#generated_text").text(data.generated_text);
                });
            });
        });
    </script>    
</head>

<body>
    <div class="container mt-5">
        <h1 class="mb-4">Generated AI-assisted event ideas!</h1>
        <div class="mb-3">
            <label for="user_input" class="form-label">Enter your input:</label>
            <textarea class="form-control" id="user_input" rows="4"></textarea>
            <!-- Add button for event prompt -->
            <div class="mb-3">
                <button id="generate_text" class="animated-btn">Generate!</button>
            </div>
            <h2 class="mt-4">Generated Text:</h2>
            <p id="generated_text"></p>
        </div>
        <button id="copy_text" class="animated-btn">Copy Text</button>
        <button id="dashboard" class="animated-btn">GoTo Dashboard</button>
</body>

</html>